======
README
======

About:
-------
Battmon is simple battery monitoring program written in python,
especially for tiling window managers like xmonad, dwm or awesome.


Features:
----------
- very light (for really basic functionality you need only python installed)
- works in background
- configurable
- no tray icon
- pop-up notifications
- options can be given through the command line (see battmon --help for details)


Prerequisites:
---------------
- only python for basic functionality
  (>=3.2 and >=2.7 are supported, if you have another python version,
  install argparse from https://pypi.python.org/pypi/argparse)
- libnotify: for pop up notifications
- sox: for playing sounds
- i3lock: to lock user session before hibernating/suspending
- pm-utils/upower: for hibernate, suspend or shutdown system on critical battery level
  (when both installed, upower will be used as default)


Usage:
-------
- Make battmon executable:

	chmod +x ./battmon.py

  and run: ./battmon.py

- or just run:

    python ./battmon.py

- To see all available options run Battmon with `-h` or `--help` option.


Notes:
-------
- Currently systemd isn't supported and probably will never be.

- Files in `bin` folder will be used when upower or pm-utils aren't installed.
  (See below)

- If you want to use hibernate, suspend or shutdown with upower,
  be sure that your ck-list-sessions output gives you something like this:

	$: ck-list-sessions
   	...
   	active = TRUE
   	...
   	is-local = TRUE
   	...


- If you don't use *KIT software and have pm-suspend, pm-hibernate installed,
  remember that this command must be execute as a root.
  (See below)

- If you don't have pm-utils installed, the scripts in `bin` folder must be executed
  as a root, the best way is to make this scripts accessible to normal user
  by running sudo without root password.
  To do so just edit `/etc/sudoers` file and add something like this, replacing username
  with your own user name and <PATH_TO_BATTMON> with absolute path to your Battmon folder:

    your_username  ALL = NOPASSWD: <PATH_TO_BATTMON>/bin/suspend.sh
    your_username  ALL = NOPASSWD: <PATH_TO_BATTMON>/bin/hibernate.sh
    your_username  ALL = NOPASSWD: <PATH_TO_BATTMON>/bin/shutdown.sh

  or enable it for a group, remember to replace group and <PATH_TO_BATTMON>:

    %group  ALL = NOPASSWD: <PATH_TO_BATTMON>/bin/suspend.sh
    %group  ALL = NOPASSWD: <PATH_TO_BATTMON>/bin/hibernate.sh
    %group  ALL = NOPASSWD: <PATH_TO_BATTMON>/bin/shutdown.sh

- Sound file is search by default in the same path where battmon was started,
  you can change this by parsing your path to your sound file using `-sp` argument
  without quotes.

- You can specify your favor lock screen command using `-lp` argument in command line,
  if none given, then as default will be used first one found in `SCREEN_LOCK_COMMANDS`
  list variable in `battmon.py` file.
  You can also change default screenlock command editing `DEFAULT_SCREEN_LOCK_COMMAND` variable
  in `battmon.py` file, but this will be overwritten when screen lock command
  was given in command line using `-lp` argument.


Issues:
--------
- Tell me.